<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<title>Mage Character Sheet Generator</title>
		<meta name="description" content="Generates Mage characters for the old World of Darkness system." />
		<meta name="author" content="Stephen Dewhurst & Ben Hendel-Doying" />
		
		<script src="https://cdnjs.cloudflare.com/ajax/libs/sugar/1.4.1/sugar-full.min.js"></script>
		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
		<script src="mcsg.js"></script>
		<link rel="stylesheet" href="html5reset.css" />
		<link rel="stylesheet" href="responsivegrid.css" />
		<link rel="stylesheet" href="mcsg.css" />
		<script>
			$(function() {
				var options = {};
				
				var characterHistory = [];
				var newButtonRotate = -30;
			
				function generateNewCharacter()
				{
					var character = new Character($('#character-sheet'), options);
				
					character.render();
					
					characterHistory.add({ 'options': options, 'character': character });
					
					// keep character history limited to 10
					while(characterHistory.length > 10)
						characterHistory.removeAt(0);
					
					updateUndoButton();
					updateNewButton(30);
				}
				
				function updateUndoButton()
				{
					if(characterHistory.length > 1)
						$('#undo').removeClass('disabled');
					else
						$('#undo').addClass('disabled');
				}
				
				function updateNewButton(delta)
				{
					newButtonRotate += delta;
					while(newButtonRotate < 0) newButtonRotate += 360;
					while(newButtonRotate >= 360) newButtonRotate -= 360;
					
					$('#generate-new > i').css({ transform: 'rotate(' + newButtonRotate + 'deg)' });
				}
				
				$('#generate-new').click(function(e) {
					e.preventDefault();
					
					generateNewCharacter();
				});
				
				$('#undo').click(function(e) {
					e.preventDefault();
					
					if(characterHistory.length > 1)
					{
						var item = characterHistory[characterHistory.length - 2];
						
						item.character.render();
						
						characterHistory.removeAt(characterHistory.length - 1);
					
						updateUndoButton();
						updateNewButton(-30);
					}
				});
				
				generateNewCharacter();
			});
		</script>
	</head>
	<body>
		<header>
			<section>
				Mage Character Sheet Generator
			</section>
		</header>
		<menu>
			<section>
				<ul>
					<li><a href="" id="generate-new"><i>&#8635;</i> New</a></li>
					<li><a href="" id="undo"><i>&#x238c;</i> Unroll</a></li>
				</ul>
			</section>
		</menu>
		<main>
			<section id="character-sheet">
				<h2>Character</h2>
				<div class="section group">
					<div class="col span_1_of_3">
						<dl>
							<dt>Name</dt>
							<dd data-property="name"></dd>
							<dt>Tradition</dt>
							<dd data-property="tradition"></dd>
						</dl>
					</div>
					<div class="col span_1_of_3">
						<dl>
							<dt>Nature</dt>
							<dd data-property="nature"></dd>
							<dt>Demeanor</dt>
							<dd data-property="demeanor"></dd>
						</dl>
					</div>
					<div class="col span_1_of_3">
						<dl>
							<dt>Essence</dt>
							<dd data-property="essence"></dd>
							<dt>Experience</dt>
							<dd></dd>
						</dl>
					</div>
				</div>

				<h2>Attributes</h2>
				<div class="section group">
					<div class="col span_1_of_3">
						<h3>Physical</h3>
						<dl>
							<dt>Strength</dt>
							<dd data-property="strength"></dd>
							<dt>Dexterity</dt>
							<dd data-property="dexterity"></dd>
							<dt>Stamina</dt>
							<dd data-property="stamina"></dd>
						</dl>
					</div>
					<div class="col span_1_of_3">
						<h3>Social</h3>
						<dl>
							<dt>Charisma</dt>
							<dd data-property="charisma"></dd>
							<dt>Manipulation</dt>
							<dd data-property="manipulation"></dd>
							<dt>Appearance</dt>
							<dd data-property="appearance"></dd>
						</dl>
					</div>
					<div class="col span_1_of_3">
						<h3>Mental</h3>
						<dl>
							<dt>Perception</dt>
							<dd data-property="perception"></dd>
							<dt>Intelligence</dt>
							<dd data-property="intelligence"></dd>
							<dt>Wits</dt>
							<dd data-property="wits"></dd>
						</dl>
					</div>
				</div>

				<h2>Abilities</h2>
				<div class="section group" data-property="abilities">
				
				</div>

				<h2>Spheres</h2>
				<div class="section group">
					<div class="col span_1_of_3">
						<dl>
							<dt>Correspondence</dt>
							<dd data-property="correspondence"></dd>
							<dt>Entropy</dt>
							<dd data-property="entropy"></dd>
							<dt>Forces</dt>
							<dd data-property="forces"></dd>
						</dl>
					</div>
					<div class="col span_1_of_3">
						<dl>
							<dt>Life</dt>
							<dd data-property="life"></dd>
							<dt>Matter</dt>
							<dd data-property="matter"></dd>
							<dt>Mind</dt>
							<dd data-property="mind"></dd>
						</dl>
					</div>
					<div class="col span_1_of_3">
						<dl>
							<dt>Prime</dt>
							<dd data-property="prime"></dd>
							<dt>Spirit</dt>
							<dd data-property="spirit"></dd>
							<dt>Time</dt>
							<dd data-property="time"></dd>
						</dl>
					</div>
				</div>
				
				<h2>Advantages</h2>
				<div class="section group">
					<div class="col span_1_of_3">
						<h3>Backgrounds</h3>
					</div>
					<div class="col span_1_of_3">
						<h3>Arete</h3>
						<div data-property="arete" class="centered"></div>
					</div>
					<div class="col span_1_of_3">
						<h3>Willpower</h3>
						<div data-property="willpower" class="centered"></div>
						<h3>Health</h3>
						<div data-property="health" class="centered"></div>
					</div>
				</div>
				<div class="section group">
					<div class="col span_1_of_3">
						<h3>Merits and Flaws</h3>
					</div>
					<div class="col span_1_of_3">
						<h3>Quintessence</h3>
					</div>
					<div class="col span_1_of_3">
						<h3>Equipment</h3>
					</div>
				</div>
			</section><!-- #character-sheet -->
		</main>
		<footer>
			<section>
				by <a href="">Stephen Dewhurst</a> and <a href="">Ben Hendel-Doying</a>
			</section>
		</footer>
	</body>
</html>